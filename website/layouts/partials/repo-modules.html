{{ $repo := . }}

<table>
    <tr>
        <td>
            <img src="/img/logos/github-mark.svg" height="32"/>
        </td>
        <td>
            <a href="https://github.com/ForeachOS/{{ $repo.id }}">GitHub</a>
        </td>
    </tr>
    <tr>
        <td>
            <img src="/img/logos/gitlab-mark.svg" height="40"/>
        </td>
        <td>
            <a href="https://gitlab.isaac.nl/antwerpen/across/{{ $repo.id }}">GitLab</a> (Internal only!)
        </td>
    </tr>
</table>

<table width="100%">
    {{ range .modules }}
    {{ $module := . }}
    {{ $module_id := .id }}
    {{ $bitbucket_repo := cond (.bitbucket | not | not) .bitbucket .id }}
    {{ $group_id := cond ($repo.group | not | not) $repo.group "com.foreach.across.modules" }}

    {{ $ref_doc := $module.id }}
    {{ if $module.refdoc }}
    {{ $ref_doc = $module.refdoc }}
    {{ else if $repo.refdoc }}
    {{ $ref_doc = $repo.refdoc }}
    {{ end }}

    {{ $java_doc := printf "across-standard-modules/%s" (index $module "java-class") }}
    {{ if $module.javadoc }}
    {{ $java_doc = printf "across-standard-modules/%s" $module.javadoc }}
    {{ else if $repo.javadoc }}
    {{ $java_doc = printf "across-standard-modules/%s" $repo.javadoc }}
    {{ else if eq $repo.id "across-framework" }}
    {{ $java_doc = "across" }}
    {{ else if eq $repo.id "across-autoconfigure" }}
    {{ $java_doc = "across-autoconfigure" }}
    {{ else if eq $repo.id "across-platform" }}
    {{ $java_doc = "across-platform" }}
    {{ end }}

    {{ $bitbucket := $module.id }}
    {{ if $module.bitbucket }}
    {{ $bitbucket = $module.bitbucket }}
    {{ else if $repo.bitbucket }}
    {{ $bitbucket = $repo.bitbucket }}
    {{ end }}
    <tr>
        <td width="30%">
            {{ .id }}
        </td>
        <td width="7.5%" align="center">
            <a href="https://docs.across.dev/across-site/production/{{ $ref_doc }}" target="refdoc-{{ .id }}">
                Docs
            </a>
        </td>
        <td width="7.5%" align="center">
            <a href="https://docs.across.dev/{{ $java_doc }}" target="javadoc-{{ .id }}">
                API
            </a>
        </td>
        <td width="20%">
            <a href="https://central.sonatype.com/artifact/{{ $group_id }}/{{ .id }}"
               target="maven-central-{{ .id }}">
                <img src="https://img.shields.io/maven-central/v/{{ $group_id }}/{{ .id }}"
                     alt="Maven central link for {{ .id }}"/>
            </a>
        </td>
        <!--
        <td>
            <a href="https://github.com/ForeachOS/{{ $repo.id }}/tree/__branch__/{{ .id }}" target="github-{{ $module_id }}">
                <img src="/img/logos/github.png" height="32" alt="GitHub for {{ . }}"/>
            </a>
        </td>
        -->
        <td width="20%">
            <a href="https://bitbucket.org/beforeach/{{ $bitbucket }}" target="bitbucket-{{ $module_id }}">
                <img src="/img/logos/bitbucket.svg" alt="Bitbucket project for {{ $module_id }}"/>
            </a>
        </td>
        <td width="10%">
            {{ if .key }}
            <a href="https://foreach.atlassian.net/projects/{{ .key }}/issues" target="jira-{{ $module_id }}">
                <img src="/img/logos/jira.svg" alt="Jira project for {{ $module_id }}"/>
            </a>
            {{ end }}
        </td>
    </tr>
    {{ end }}
</table>
